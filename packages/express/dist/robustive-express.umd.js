(function(n,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("robustive-ts")):typeof define=="function"&&define.amd?define(["exports","robustive-ts"],e):(n=typeof globalThis!="undefined"?globalThis:n||self,e(n.RobustiveExpress={},n.Robustive))})(this,function(n,e){"use strict";const l=new e.SwiftEnum;e.Scenario.prototype.proceedUntilResponse=function(o,s,r,i){return this.delegate!==void 0&&this.delegate.proceedUntilResponse!==void 0?this.delegate.proceedUntilResponse(o,s,r,i,this):Promise.reject(new Error)},e.Scenario.prototype.respond=function(o,s=l.normal({statusCode:200})){return Promise.resolve({...o,status:s})},e.UsecaseImple.prototype.handleRequest=function(o,s,r,i){const t=this,d=(u,f,p)=>{const c=p.slice(-1)[0];return c.course==="goals"||c.status?Promise.resolve(c):t._scenario.proceedUntilResponse(u,f,c,r).then(h=>(t.currentContext=h,p.push(h),d(u,f,p)))};if(t._scenario.authorize&&!t._scenario.authorize(r,t._domain,t._usecase)){const u=new e.ActorNotAuthorizedToInteractIn(r,t._domain,t._usecase);return Promise.reject(u)}const a=[t.currentContext];return i?i(()=>d(o,s,a)):d(o,s,a)},n.ResponseStatus=l,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=robustive-express.umd.js.map
